---
layout: page  # ç”¨ Jekyll é»˜è®¤çš„ page å¸ƒå±€ï¼ˆä¹Ÿå¯ä»¥è‡ªå·±å»ºï¼‰
title: æ–‡ç« æœç´¢  # æœç´¢é¡µé¢æ ‡é¢˜
---

<!-- æœç´¢æ¡†æ ·å¼ + ç»“æœæ˜¾ç¤ºåŒºåŸŸ -->
<div style="max-width: 800px; margin: 2rem auto; padding: 0 1rem;">
  <h2>ğŸ” è¾“å…¥å…³é”®è¯æœç´¢æ–‡ç« </h2>
  <!-- æœç´¢è¾“å…¥æ¡† -->
  <input 
    type="text" 
    id="search-input" 
    style="width: 100%; padding: 1rem; font-size: 1.1rem; border: 2px solid #ddd; border-radius: 8px; margin-bottom: 1.5rem;"
    placeholder="æ¯”å¦‚æœç´¢ã€ŒJekyllã€ã€Œæ•™ç¨‹ã€ç­‰å…³é”®è¯..."
  >
  <!-- æœç´¢ç»“æœåˆ—è¡¨ -->
  <div id="search-results" style="list-style: none; padding: 0;"></div>
</div>

<!-- å¼•å…¥æœç´¢å·¥å…· lunr.jsï¼ˆä¸ç”¨ä¸‹è½½ï¼Œç›´æ¥ç”¨CDNï¼‰ -->
<script src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script>
<script>
// ç¬¬ä¸€æ­¥ï¼šè·å–æ‰€æœ‰æ–‡ç« çš„æ•°æ®ï¼ˆä»åé¢æ–°å»ºçš„ search.json è¯»å–ï¼‰
fetch('{{ site.baseurl }}/search.json')
  .then(response => response.json())  // è§£æ JSON æ•°æ®
  .then(allPosts => {
    // ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ– lunr æœç´¢ç´¢å¼•ï¼ˆå‘Šè¯‰æœç´¢å·¥å…·è¦æœç´¢æ–‡ç« çš„å“ªäº›éƒ¨åˆ†ï¼‰
    const searchIndex = lunr(function () {
      this.field('title');  // æœç´¢æ–‡ç« æ ‡é¢˜
      this.field('content');  // æœç´¢æ–‡ç« æ­£æ–‡
      this.field('date');  // æœç´¢æ–‡ç« æ—¥æœŸï¼ˆå¯é€‰ï¼‰
      this.ref('url');  // æœç´¢ç»“æœè·³è½¬çš„æ–‡ç« é“¾æ¥
      
      // æŠŠæ‰€æœ‰æ–‡ç« æ•°æ®æ·»åŠ åˆ°æœç´¢ç´¢å¼•é‡Œ
      allPosts.forEach(post => {
        this.add(post);
      });
    });

    // ç¬¬ä¸‰æ­¥ï¼šç»‘å®šæœç´¢è¾“å…¥äº‹ä»¶ï¼ˆç”¨æˆ·è¾“å…¥æ—¶å®æ—¶æœç´¢ï¼‰
    const searchInput = document.getElementById('search-input');
    const searchResults = document.getElementById('search-results');

    searchInput.addEventListener('input', function (e) {
      const searchKeyword = e.target.value.trim();  // è·å–ç”¨æˆ·è¾“å…¥çš„å…³é”®è¯ï¼ˆå»æ‰ç©ºæ ¼ï¼‰
      searchResults.innerHTML = '';  // æ¸…ç©ºä¹‹å‰çš„æœç´¢ç»“æœ

      // å¦‚æœç”¨æˆ·æ²¡è¾“å…¥å…³é”®è¯ï¼Œä¸æ‰§è¡Œæœç´¢
      if (!searchKeyword) {
        searchResults.innerHTML = '<p style="color: #666;">è¯·è¾“å…¥å…³é”®è¯æœç´¢...</p>';
        return;
      }

      // æ‰§è¡Œæœç´¢ï¼ˆlunr ä¼šè¿”å›åŒ¹é…çš„æ–‡ç« ï¼‰
      const matchedPosts = searchIndex.search(searchKeyword);

      // å¦‚æœæ²¡æ‰¾åˆ°åŒ¹é…çš„æ–‡ç« 
      if (matchedPosts.length === 0) {
        searchResults.innerHTML = '<p style="color: #999;">æ²¡æœ‰æ‰¾åˆ°ç›¸å…³æ–‡ç« ï¼Œè¯·æ¢ä¸ªå…³é”®è¯è¯•è¯•ï½</p>';
        return;
      }

      // æ˜¾ç¤ºåŒ¹é…çš„æ–‡ç« ç»“æœ
      matchedPosts.forEach(match => {
        // æ‰¾åˆ°åŒ¹é…æ–‡ç« çš„å®Œæ•´æ•°æ®
        const post = allPosts.find(item => item.url === match.ref);
        // åˆ›å»ºç»“æœé¡¹
        const resultItem = document.createElement('div');
        resultItem.style = 'padding: 1.2rem; border-bottom: 1px solid #eee;';
        resultItem.innerHTML = `
          <a href="${post.url}" style="text-decoration: none; color: #2c3e50; font-size: 1.2rem; font-weight: bold;">${post.title}</a>
          <p style="color: #666; margin: 0.5rem 0; font-size: 0.9rem;">å‘å¸ƒæ—¥æœŸï¼š${post.date}</p>
          <p style="color: #34495e; margin: 0;">${post.content.substring(0, 100)}...  <!-- æ˜¾ç¤ºæ­£æ–‡å‰100å­— -->
        `;
        searchResults.appendChild(resultItem);
      });
    });
  });
</script>